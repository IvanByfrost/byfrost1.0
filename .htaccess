<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Establecer la base del directorio
    RewriteBase /byfrost1.0/
    
    # Redirigir específicamente las rutas que comiencen con app/ a index.php
    RewriteRule ^app/(.*)$ index.php?url=app/$1 [QSA,L]
    
    # No reescribir archivos y directorios existentes
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    
    # Redirigir todo a index.php
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule>

# Si mod_rewrite no está disponible, usar redirecciones directas
<IfModule !mod_rewrite.c>
    ErrorDocument 404 /byfrost1.0/index.php?error=404
    ErrorDocument 500 /byfrost1.0/index.php?error=500
</IfModule>

# Redirección de errores a páginas personalizadas
ErrorDocument 400 /byfrost1.0/index.php?error=400
ErrorDocument 404 /byfrost1.0/index.php?error=404
ErrorDocument 500 /byfrost1.0/index.php?error=500

# Configuración adicional para asegurar que PHP maneje las rutas
<Files "index.php">
    AcceptPathInfo On
</Files>

# Prevenir acceso directo a archivos sensibles
<FilesMatch "\.(log|sql|txt)$">
    <IfModule mod_authz_core.c>
        Require all denied
    </IfModule>
    <IfModule !mod_authz_core.c>
        Order deny,allow
        Deny from all
    </IfModule>
</FilesMatch>